<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>BISMILLAH</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin=""/>
    <link rel="stylesheet" href="map.css" />
  </head>
  <body>
    <div id="peta" style="height: 500px"></div>

    <script src="mangrove.js"></script>
    <script src="param.js"></script>
    <script src="leaflet-providers.js"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js" integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script> 
    <script>
      var peta = L.map("peta").setView(
        [-8.604701407182281, 116.29901848124125],
        8.5
      );
      const tiles = L.tileLayer(
        "https://tile.openstreetmap.org/{z}/{x}/{y}.png",
        {
          maxZoom: 19,
          attribution:
            '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
        }
      ).addTo(peta);
      const Esri_WorldImagry = L.tileLayer(
        "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
        {
          attribution:
            "Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",
        }
      );

      const parameter = L.layerGroup();

      const getColorForGridCode = (gridCode) => {
  
        const colorMap = {
          28: "#FF0000", // Warna untuk GridCode 28
          29: "#FF0000", // Warna untuk GridCode 29
          30: "#00FF00", // Warna untuk GridCode 30
          31: "#00FF00", // Warna untuk GridCode 31
          32: "#0000FF", // Warna untuk GridCode 32
          33: "#0000FF", // Warna untuk GridCode 33
        };

        return colorMap[gridCode] || "#FFFFFF"; // Warna default: putih
      };

      L.geoJSON(param, {
        style: function (feature) {
          const gridCode = feature.properties.GridCode;
          const color = getColorForGridCode(gridCode);

          return {
            color: color,
          };
        },
        onEachFeature: function (feature, layer) {
          layer.on("click", function (e) {
            const gridCode = feature.properties.GridCode;
            const color = getColorForGridCode(gridCode);

            L.popup()
              .setLatLng(e.latlng)
              .setContent(
                "Suhu Permukaan Laut: " +
                  feature.properties.class +
                  "°C<br>" +
                  "Salinitas: " +
                  feature.properties.salinity_2 +
                  " mg/l<br>" +
                  "Padatan Tersuspensi: " +
                  feature.properties.MPT +
                  " ‰"
              )
              .openOn(peta);
          });
        },
      }).addTo(parameter);
      
      
      // const mangrove = L.layerGroup();
      // L.geoJSON(mangrove, {color: '#54B435'}).addTo(mangrove);

      var baseLayers = {
        " Open Street Map": tiles,
        " World Imagery": Esri_WorldImagry
      };

      var overlays = {
        // " Mangrove": mangrove,
        " Parameter": parameter
      };

      L.control.layers(baseLayers, overlays).addTo(peta);
    </script>
  </body>
</html>
